<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="bhp">
<head>
    <style>
        body {
            font-family: Arial, Verdana, serif;
            font-size:9pt;
            width:210mm;
        }
        h1 { font-size:11pt; text-transform:uppercase; }
        h2 { font-size:11pt; }
        h3 { font-size:10pt; }
        .header {
            text-align: center;
            text-transform: uppercase;
            padding:0 0 50pt;
        }
        .header-part {
          float:left;
          border:1px solid #fff;
        }
        .header-part.barcode-container {
          width:25%;
        }
        .header-part.lab-title {
          text-align:center;
          width:45%;
        }
        .header-part.site-info {
          text-align:right;
        }
        .requisition {
            width:210mm;
        }
        .lab-title {
          font-weight:bold;
          font-size:12pt;
        }
        .lab-title .lab-address {
          font-weight:normal;
          font-size:10pt;
        }
        .site-info {
          font-weight:bold;
          font-size:18pt;
        }
        .section {
          padding:15px;
          margin:5px;
          float:left;
          border:1px solid #333;
          width:40%;
        }
        .clearfix {
          clear:both;
        }
        .field-line {
          padding:10px 0;
          clear:both;
        }
        .field .label {
          font-size:10pt;
          font-weight:bold;
          padding-bottom:2px;
        }
        .field .value {
          font-size:14pt;
          border:1px solid #cdcdcd;
          padding:3px 5px;
          text-transform:uppercase;
        }
        .field {
          padding:0px 10px;
          float:left;
        }
    </style>
</head>
<body tal:define="
    plone_view  context/@@plone;
    portal_url  nocall:context/portal_url;
    portal      portal_url/getPortalObject;">

  <tal:ar repeat="analysisrequest view/analysis_requests">
    <div class="requisition"
         tal:define="sample python:analysisrequest.getSample();
                     client python:analysisrequest.aq_parent">
      <div class="page-header">
        <div class='header-part barcode-container'>
          <div class='barcode'
               data-code='code128'
               data-showHRI='false'
               data-barHeight='15'
               data-addQuietZone='true'
               tal:attributes="data-id python:analysisrequest.id">
          </div>
        </div>
        <div class="header-part lab-title">
          BOTSWANA HARVARD HIV REFERENCE LABORATORY
          <div class="lab-address">
            PRINCESS MARINA HOSPITAL<br/>GABORONE, BOTSWANA * TEL 3902671 EXT2126
          </div>
        </div>
        <div class="header-part site-info">
          <div class="study-code" tal:content="python: client.getTaxNumber()"></div>
        </div>
        <div class="clearfix"></div>
      </div>

      <div class="page-body">
        <div class="section">
          <h1>Section 1: Participant information</h1>
          <div class="field-line">
            <div class="field">
              <div class="label">Participant ID</div>
              <div class="value" tal:content="python: view.get(sample, 'ParticipantID')"></div>
            </div>
          </div>
          <div class="field-line">
            <div class="field">
              <div class="label">Other Patient Reference</div>
              <div class="value" tal:content="python: view.get(sample, 'OtherParticipantReference')"></div>
            </div>
          </div>
          <div class="field-line">
            <div class="field">
              <div class="label">P.Initials</div>
              <div class="value" tal:content="python: view.get(sample, 'ParticipantInitials')"></div>
            </div>
            <div class="field">
              <div class="label">Gen (M/F)</div>
              <div class="value" tal:content="python: view.get(sample, 'Gender')"></div>
            </div>
            <div class="field">
              <div class="label">Gen (M/F)</div>
              <div class="value" tal:content="python: view.get(sample, 'Visit')"></div>
            </div>
            <div class="field">
              <div class="label">Fasting</div>
              <div class="value" tal:content="python: view.get(sample, 'Fasting') and 'Y' or 'N'"></div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="section">
          <h1>Section 2: Specimen information</h1>
          <div class="field-line">
            <div class="field">
              <div class="label">Date/Time Specimen Drawn</div>
              <div class="value" tal:content="python: view.get(sample, 'DateSampled')"></div>
            </div>
          </div>
          <div class="field-line">
            <div class="field">
              <div class="label">Sample Type / Volume</div>
              <div class="value">
                <span tal:content="python: sample.getSampleType().Title()"></span>&nbsp;/&nbsp;
                <span tal:content="python: view.get(sample, 'Volume')"></span>
              </div>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
        <div class="section">
          <h1>Section 3: Site information</h1>
          <div class="field-line">
            <div class="field">
              <div class="label">P.Initials</div>
              <div class="value" tal:content="python: client.getClientID()"></div>
            </div>
            <div class="field">
              <div class="label">Study Code</div>
              <div class="value" tal:content="python: client.getTaxNumber()"></div>
            </div>
            <div class="clearfix"></div>
            <h2 tal:content="python: client.Title()"></h2>
          </div>
        </div>
        <div class="section">
          <h1>Section 4: Requisition</h1>
          <div class="field-line">
            <div class="field">
              <div class="label">Analyses</div>
              <div>
          <tal:service tal:repeat="analysis python: analysisrequest.getAnalyses()">
            <div class="analysis" tal:content="python: analysis.Title"></div>
          </tal:service>
              </div>
            </div>
          </div>
          <div class="field-line">
            <div class="field">
              <div class="label">Others</div>
              <div tal:content="python: view.get(sample, 'OtherInformation')"></div>
            </div>
          </div>
        </div>
        <div class="section">
          <h1>Section 5: Clinical information</h1>
          <div class="field-line">
            <div class="field">
              <div class="label">Study coordinator<br/>Botswana - Harvard Partnership<br/>Tel: 3910388</div>
              <h2 tal:content="python: view.get_contact_name()"></h2>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-break"></div>
  </tal:ar>
</body>
</html>
